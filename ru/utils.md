# Utils
```js
import { isObject, replicate, deliver, mapProps, debounce, throttle, delayRace, loadModule  revocablePromise, escHtml } from 'lesta'
```
В Lesta модуль входит набор вспомогательных утилит, представленных ниже. И только две из них доступны в глобальной переменной Widget модуля: lesta.replicate и lesta.revocablePromis.

## isObject
```js
isObject({}) // true
isObject([]) // false
isObject(null) // false
```
Функция проверяет является ли передаваемое значение объектом. Возвращает true если передан объект(не массив и не null).

## deepFreeze
```js
deepFreeze(obj)
```
Функция рекурсивно замораживает объект и все его вложенные свойства, делая их доступными только для чтения. Она также корректно обрабатывает циклические ссылки и предотвращает повторную обработку уже замороженных объектов. Возвращает объект с замороженными свойствами.

## replicate
```js
const cloneObject = replicate({...})
```
Функция глубокого клонирования объекта с помощью сериализации. Работает только с типами данных которые поддерживает JSON. Для клонирования объектов с другими типами можно использовать нативную javascript функцию structuredClone().


## deliver
```js
const obj = { a: { b: { c: 1 } } };

console.log(deliver(obj, "a.b.c")) // 1
console.log(deliver(obj, ["a", "b", "c"])) // 1

deliver(obj, "a.b.c", 2)
console.log(obj.a.b.c) // 2
```
Функция предоставляет безопасный способ получения и изменения вложенных свойств объекта по заданному пути. 

Параметры: 
- `target` (объект):  Объект, в котором нужно получить или изменить значение.
- `path` (массив или строка): Путь к вложенному свойству. Может быть строкой, разделенной точками (например, "a.b.c"), или массивом строк (например, ["a", "b", "c"]).
- `value` (любое значение, необязательный параметр). Если указан, то значение вложенного свойства будет изменено на это значение.

Возвращаемое значение:
Значение, которое было запрошено или изменено по заданному пути.

## mapProps
```js
props: {
  proxies: {	
    ...mapProps(['tasks', 'loading', 'isModify'], { store: 'tasks' })
  },
  methods: {
    ...mapProps(['addTask', 'searchTasks', 'filterTasks'], { store: 'tasks' })
  }
}
```
Используется для создания короткой записи объявления props. Функция создает объект, где каждому ключу из массива keys присваивается одно и тоже значение.

Параметры:
- `keys` (массив): Массив строк, которые станут ключами возвращаемого объекта.
- `value` (любое значение): Значение, которое будет присвоено каждому ключу.

## debounce
```js
// search node
oninput: (e) => {
  if (this.param.isPaste) {
    this.method.search({value: e.target.value})
    this.param.isPaste = false
  } else {
    this.param.debouncedSearch(e)
  }
},
onpaste: () => this.param.isPaste = true
…
  created() {
    this.param.debouncedSearch = debounce((e) => this.method.search({value: e.target.value}), 250)
  }
```
Функция позволяет "затормозить" вызов другой функции, чтобы она выполнялась только после того, как прошло определенное время с момента последнего вызова. Это полезно для оптимизации производительности, например, при обработке событий, которые происходят часто (например, ввод текста, изменение размера окна).

Параметры:
- `fn` (функция): Функция, вызов которой нужно "затормозить".
- `timeout` (число, по умолчанию 150): Время в миллисекундах, которое нужно ждать перед вызовом fn.

Возвращаемое значение:
Новая функция, которая будет вызывать fn только после того, как с момента последнего вызова прошло timeout миллисекунд.


## throttle
```js
const throttled = throttle(() => console.log("Throttling test: "), 1000)
window.addEventListener('resize', throttled)
```
Функция позволяет ограничить частоту вызовов функции до определенного значения. Это может помочь избежать проблем с производительностью при большом количестве вызовов и/или при работе с медленными операциями. Она также может быть полезной для случаев, когда нужно предотвратить ненамеренные двойные нажатия на кнопку или отправку нескольких запросов.

Параметры:
- `fn` (функция), которую нужно ограничить по частоте вызовов.
- `timeout` (число, по умолчанию 150): Время задержки в миллисекундах, через которое функция может быть вызвана повторно.

## delayRace
```js
delayRace(2000, this.abortSignal).then(() => {
    console.log('Delay completed')
  }).catch((err) => {
    if (err.name === 'AbortError') {
      console.log('Delay aborted')
    } else {
      console.error('An error occurred:', err)
    }
  })

setTimeout(() => controller.abort(), 1000)
```
Функция задержки.

Параметры:
- `ms` (число, по умолчанию 0): Количество миллисекунд задержки.
- `signal` (Экземпляр объекта  [AbortSignal](https://developer.mozilla.org/en-US/docs/Web/API/AbortController/signal, необязательный параметр): используется для прерывания задержки.

Возвращаемое значение:
Промис, который разрешается через `ms` миллисекунд, если сигнал `signal` не отменен. Если сигнал `signal` отменяется до истечения таймаута, промис отклоняется.

## loadModule
```js
const signal = new AbortController().signal
const aborted = () => console.log('aborted')
const dynamicImport = () => import('./myModule.js')

const module = await loadModule(dynamicImport, signal, aborted)
console.log(module)
```

Функция предназначена для загрузки модуля. Она поддерживает асинхронную загрузку модулей и обработку сигналов отмены.

Параметры:
- `src` (может быть функцией или объектом): Если это функция, она должна возвращать либо объект, либо промис. Если это объект, он будет возвращен сразу.
- `signal` (Экземпляр объекта  [AbortSignal](https://developer.mozilla.org/en-US/docs/Web/API/AbortController/signal, необязательный параметр): используется для отмены операции загрузки, если это необходимо.
- `aborted` (Callback функция, необязательный параметр): Вызывается при отмене операции загрузки.

Возвращаемое значение:
Возвращает запрашиваемый модуль или само передаваемое значение.

## escHtml
```js
const unsafeString = '<script>alert("XSS Attack!")</script> & "Hello"'

const safeString = escHtml(unsafeString)

console.log(safeString) // &lt;script&gt;alert(&quot;XSS Attack!&quot;)&lt;/script&gt; &amp; &quot;Hello&quot;

```
Функция используется для экранирования специальных символов в HTML-строке, предотвращая XSS-атаки. Она заменяет символы `<`, `>`, `&`, `"`, `'`, ```, `=` на их HTML-сущности (`&lt;`, `&gt;`, `&amp;`, `&quot;`, `&#x27;`, `&#x60;`, `&#x3D;`), делая строку безопасной для вставки в HTML-код. 

Параметры:
-`str`()

> Обязательно используйте эту функцию для небезопасного HTML.

## camelToKebab
```js
const app = createApp({ 
  selectors: (name) => '.' + camelToKebab(name)
})
```
Функция преобразует строку из camelCase в kebab-case. Работает только со строками. Заменяет заглавные буквы на дефисы и приводит строку к нижнему регистру. Может использоваться для глобальной функции преобразования имен узлов в селекторы.
